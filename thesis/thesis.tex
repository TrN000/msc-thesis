\documentclass{amsbook}
\usepackage[backend=biber,style=authoryear]{biblatex}
\usepackage[most]{tcolorbox}

\newtcolorbox{redbox}{%
  colframe=red,
  colback=white,
  boxrule=0.8pt,
  fonttitle=\color{black}\bfseries,
  title="unfinished"
}


% Define theorem environments
\newtheorem{theorem}{Theorem}[section]   % numbered within sections
\newtheorem{lemma}[theorem]{Lemma}       % shares counter with theorem
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}

% Non-italic environments (e.g. Definition, Example)
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

% Remark-style (upright text, no bold title)
\theoremstyle{remark}
\newtheorem*{remark}{Remark}   % the * makes it unnumbered

\newcommand{\Z}{\mathopen{}\ensuremath{\mathbb{Z}}\mathclose{}}
\newcommand{\C}{\mathopen{}\ensuremath{\mathbb{C}}\mathclose{}}
\newcommand{\R}{\mathopen{}\ensuremath{\mathbb{R}}\mathclose{}}
\newcommand{\ra}{\mathopen{}\ensuremath{\rightarrow}\mathclose{}}

\addbibresource{./references.bib}

\title{Proof Assistants and Proof Formalization}
\author{Nicolas Trutmann}
\date{January 2026}

\begin{document}

\maketitle

\tableofcontents

\section{Introduction}\label{sec:introduction} % (fold)

\begin{redbox}
  what is a proof assistant, why do proofs "hold" in a proof assistant, are there
  options, which option have we chosen and why, what are we doing with it,
  (eventually) what have we gotten out of this endeavor

  \cite{avigad_foundations_2021}
\end{redbox}

% section Introduction (end)

\section{simply typed lambda calculus as a model of higher order logic}\label{sec:simply_typed_lambda_calculus_as_a_model_of_higher_order_logic} % (fold)

The formulation of simple type theory resembles models\footnote{in the strict sense of the definition of model theory for set theory} where models of first order logic formulas are built from sets, but using ((many?) sorted?) expressions from lambda calculus. 

%% TODO: does it matter that we use higher order logic or is it fine, because we built the higher order from first order?

%% TODO: also possible to build equivalently using `=` as definition and construct other terms from it.

We build the axiom of choice by a choice operator $\varepsilon_{\alpha}$ of type $(\alpha \ra Prop) \ra \alpha$.
So for any predicate $P\ : \ (\alpha \ra Prop)$, $\varepsilon_{\alpha} P$ chooses an $x$ such that $Px$.
It is convenient to hold a double viewpoint, with $P$ as a function on the type $\alpha$ and another where $P$ is viewed as a subset of the set of all elements of type $\alpha$, namely the subset of all $x$ such that $Px$ holds.

%% TODO: can I equate sets and types in the sense of models? unlikely. see todo above.

This is fine, but impractical.
This is usually extended byproof assistants by allowing the user to create definitions, variable substitutions on terms and variable substitution on types.
In simple type theory, the last point is not even a semantically meaningful sentence, as we'll soon see.

This establishes simple type theory as a model, alongside set theory, of logic. %%% TODO: better reference to models, halbeisen's book? ok, work it into text
\cite{halbeisen_combinatorial_2025}
This has an immense shortcoming. The language we have described so far doesn't allow us to talk \emph{about} types, only \emph{with} types.
Take for example an algebraic structure like a group.
While we may be able to talk about the elements of such a group, we do not have the tools necessary to generalize this to statements about \emph{all types which are groups}.
Types and terms are kept strictly separate and we can't quantify over them.
This distinction of therms and types is not present in set theory.
Think for example, of the symbol $\Z$, which, in type theory, would be clearly categorized as a type, however this renders common notations such as "$n\Z$" syntactically meaningless.
In set theory on the other hand, both $\Z$ and $n\Z$ are clearly sets (for lack of options) and the second expressions is simply a slight abuse of notation for a perfectly legal construction of a set.

% section simply typed lambda calculus as a model of higher order logic (end)

\section{dependent type theory}\label{sec:dependent_type_theory} % (fold)

% section dependent type theory (end)

\section{setoid hell}\label{sec:setoid_hell} % (fold)

% section setoid hell (end)

\section{implementations of extensionality}\label{sec:implementations_of_extensionality} % (fold)

comparing lean and Rocq with respect to metatheoretical properties that the rocq people care about.

% section implementations of extensionality (end)

\section{SR failures}\label{sec:sr_failures} % (fold)

% section SR failures (end)

\section{Sylvester's Theorem}\label{sec:sylvester_s_theorem} % (fold)

Cite the theorem in the form that we prove, big picture overview of the proof,
side by side comparison of "semantic" proof vs "formal" proof (vs formal
proof?)

\begin{redbox}
  \subsection{Prelude}\label{sec:prelude} % (fold)
  definitions and such

  bilinear form, notation
  % subsection Prelude (end)
\end{redbox}


\begin{redbox}
  The original theorem is over 170 years old but remains reasonably legible to
  modern readers. Perhaps less familiar to the modern reader is the
  presentation of the theorem, where the statement is entirely contained in the
  title of the paper, and the body of the paper is devoted entirely to the
  proof of the statement.

  The title reads:
  \begin{quotation}
    A DEMONSTRATION OF THE THEOREM THAT EVERY HOMOGENEOUS QUADRATIC POLYNOMIAL
    IS REDUCIBLE BY REAL ORTHOGONAL SUBSTITUTIONS TO THE FORM OF A SUM  OF
    POSITIVE AND NEGATIVE SQUARES. [sic.]
  \end{quotation}

  % TODO: actually read the proof and see if it holds and is equivalent to the modern statement?


  We'll be following the more modern approach of Lang, whose theorem reads like this:

\end{redbox}

\begin{theorem}[Sylvester]
  Let $E$ be a real vector space with a nondegenerate bilinear form $g$.
  There exists an integer $r\in \Z$, $r \geq 0$, if $\{v_1,\dots,v_n\}$ is an
  orthogonal basis of $E$ then for $r$ of them we have $v_i^2 > 0$ and for
  $n-r$ of them $v_i^2 < 0$.
\end{theorem}

\begin{proof}

  Suppose $v_1,\dots,v_n$ and $w_1,\dots,w_n$ were two orthogonal bases.

  Let $a_i = v_i^2$ and $b_i = w_i^2$,\\
  of which $a_1,\dots,a_r > 0$, and $a_{r+1},\dots,a_n < 0$ \\
  and $b_1,\dots,b_r > 0$, bnd $b_{r+1},\dots,b_n < 0$ for some integers $r,s$.

  It suffices to show that $r=s$.

  To that end we'll show that the set $\{v_1,\dots,v_r, w_{s+1},\dots, w_n\}$
  is linearly independent. Because then we get that $r + (n-s) \leq n$, and
  therefore $r \leq s$ and by symmetry, $r=s$.

  Suppose that

  \[
    (x_1 v_1 + \dots + x_r v_r) + (y_{s+1} w_{s+1} + \dots + y_n w_n) = 0
  \]

  Then

  \[
    x_1 v_1 + \dots + x_r v_r =  - y_{s+1} w_{s+1} - \dots - y_n w_n
  \]

  squaring both sides yields

  \[
    x_1^2 a_1 + \dots + x_r^2 a_r =  y_{s+1}^2 b_{s+1} + \dots + y_n^2 b_n
  \].

  The left hand side is $\geq 0$ and the right hand side is $\leq 0$, and
  therefore 0. It follows that all coefficients are 0, which shows that they
  are linearly independent.

\end{proof}


\begin{redbox}
  The original reference is \cite{Sylvester_1852}.

  It is presented in \cite[Thm.~4.1]{Lang_2002} in a modern way.

  Also \cite[Theorem 10.43]{Norman_1986}, which is what's cited on wikipedia.
\end{redbox}

% section Sylvester's Theorem (end)

\section{Comparison to existing theorem}\label{sec:comparison_to_existing_theorem} % (fold)

I accidentally implemented the existence theorem of an orthogonal basis. This
invites for comparison. The underlying structure of the theorem is essentially
the same. It requires an existence proof of one nonisotropic vector, and then
proceeds by induction on the dimension.

% section Comparison to existing theorem (end)

\section{timetravelling bugs}\label{sec:timetravelling_bugs} % (fold)

% section timetravelling bugs (end)

\printbibliography


\end{document}
